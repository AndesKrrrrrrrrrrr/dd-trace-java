apply from: "${rootDir}/gradle/java.gradle"

excludedClassesCoverage += [
  // This is mainly JFR copy-paste and should be removed at some point
  'com.datadog.profiling.uploader.util.*',
  // This is just a static declaration that is hard to test
  'com.datadog.profiling.uploader.VersionInfo'
]

dependencies {
  compile deps.slf4j
  compile project(':dd-trace-api')

  compile project(':dd-java-agent:agent-profiling:profiling-controller')

  compile group: 'com.squareup.okhttp3', name: 'okhttp', version: '3.14.4'

  testCompile deps.junit5
  testCompile deps.guava
  testCompile project(':dd-java-agent:agent-profiling:profiling-testing')
  testCompile group: 'org.mockito', name: 'mockito-core', version: '3.1.0'
  testCompile group: 'org.mockito', name: 'mockito-junit-jupiter', version: '3.1.0'
  testCompile deps.bytebuddy
  testCompile deps.bytebuddyagent
  testCompile group: 'com.squareup.okhttp3', name: 'mockwebserver', version: '3.14.4'
}

/* We use Java8 features, but there is no code needing JFR libraries */
sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8
