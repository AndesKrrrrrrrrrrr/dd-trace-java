apply from: "$rootDir/gradle/java.gradle"
apply plugin: "idea"

minimumBranchCoverage = 0.7
minimumInstructionCoverage = 0.7

excludedClassesCoverage += [
  // Excluded because it has catch branches that only log errors and are not covered with tests
  "datadog.trace.agent.tooling.matchercache.MatcherCacheFileBuilder"
]

dependencies {
  implementation deps.slf4j
  implementation deps.bytebuddy
  testImplementation deps.junit5
  testImplementation deps.mockito
  testImplementation project(':internal-api')
}

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

test {
  useJUnitPlatform()
}

ext {
  minJavaVersionForTests = JavaVersion.VERSION_1_8
}

idea {
  module {
    jdkName = '11'
  }
}
