
plugins {
  id "org.jetbrains.kotlin.jvm" // version "1.8.21"
}

muzzle {
  pass {
    group = 'io.ktor'
    module = 'ktor-server-core-jvm'
    versions = "[2.0.0,)"
    //    extraDependency "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.5.0"
  }
  //  pass {
  //    group = 'org.jetbrains.kotlinx'
  //    module = 'kotlinx-coroutines-core-jvm'
  //    versions = "[1.5.0,)"
  //    extraDependency "org.jetbrains.kotlin:kotlin-stdlib:1.6.21"
  //  }
}

apply from: "$rootDir/gradle/java.gradle"
//apply from: "$rootDir/gradle/test-with-kotlin.gradle"
//apply plugin: 'kotlin'

addTestSuiteForDir('latestDepTest', 'test')

//tasks.named("compileLatestDepTestGroovy").configure {
//  classpath += files(compileLatestDepTestKotlin.destinationDirectory)
//}

dependencies {
  def ktorVersion = '2.0.0'
  //  def coroutinesVersion = '1.5.0'
  //  implementation project(':dd-java-agent:instrumentation:kotlin-coroutines')
  compileOnly deps.kotlin
  compileOnly "io.ktor:ktor-server-core-jvm:$ktorVersion"
  //  compileOnly "org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:$coroutinesVersion"
  //  ktor-server-core-jvm-2.3.0
  testImplementation deps.kotlin
  //  testImplementation "org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:$coroutinesVersion"
  //  testImplementation testFixtures(project(':dd-java-agent:instrumentation:kotlin-coroutines'))

  //  latestDepTestImplementation group: 'org.jetbrains.kotlinx', name: "kotlinx-coroutines-core", version: '1.6.+'
}
